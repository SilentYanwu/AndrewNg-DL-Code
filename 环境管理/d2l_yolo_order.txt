# ============================================================
# ğŸ”§ YOLO + æ·±åº¦å­¦ä¹ é€šç”¨ç¯å¢ƒå®‰è£…è„šæœ¬
# ç¯å¢ƒåç§°ï¼šd2l_yolo
# Python ç‰ˆæœ¬ï¼š3.10
# CUDA æ”¯æŒï¼š12.1ï¼ˆé€‚ç”¨äº NVIDIA GPUï¼‰
# ============================================================

# 1ï¸âƒ£ åˆ›å»ºå¹¶æ¿€æ´»æ–°ç¯å¢ƒ
conda create -n d2l_yolo python=3.10 -y
conda activate d2l_yolo

# ------------------------------------------------------------
# 2ï¸âƒ£ å®‰è£… PyTorchï¼ˆå®˜æ–¹ CUDA 12.1 ç‰ˆæœ¬ï¼‰
# ------------------------------------------------------------
pip install torch==2.5.1 torchvision==0.20.1 torchaudio==2.5.1 --index-url https://download.pytorch.org/whl/cu121

# ------------------------------------------------------------
# 3ï¸âƒ£ å®‰è£… torchtext ä¸ torchdataï¼ˆä¸ torch 2.5.1 å®Œç¾å…¼å®¹ï¼‰
# ------------------------------------------------------------
pip install torchtext==0.18.0 torchdata==0.10.1

# ------------------------------------------------------------
# 4ï¸âƒ£ å®‰è£…ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹PyTorch ç‰ˆï¼ˆd2lï¼‰
# ------------------------------------------------------------
pip install d2l==1.0.3

# ------------------------------------------------------------
# 5ï¸âƒ£ å®‰è£… YOLOï¼ˆUltralytics YOLOv8 / YOLO11 é€šç”¨ç‰ˆï¼‰
# ------------------------------------------------------------
pip install ultralytics==8.3.65

# ------------------------------------------------------------
# 6ï¸âƒ£ å®‰è£… ONNX æ¨ç†æ”¯æŒï¼ˆç”¨äºæ¨¡å‹å¯¼å‡ºä¸éƒ¨ç½²ï¼‰
# ------------------------------------------------------------
# å¿…é¡»çš„æ ¸å¿ƒåº“
pip install onnx==1.16.2

# GPU æ¨ç†å¼•æ“ï¼ˆæ¨èï¼Œæœ‰ NVIDIA GPU æ—¶ä½¿ç”¨ï¼‰
pip install onnxruntime-gpu==1.20.0

# æ›´å¿«ï¼Œæ›´å°çš„æ¨¡å‹ã€‚
pip install onnxslim==0.1.39

# ------------------------------------------------------------
# 7ï¸âƒ£ å®‰è£…ç§‘å­¦è®¡ç®—ä¸å¯è§†åŒ–å¸¸ç”¨åº“
# ------------------------------------------------------------
pip install opencv-python==4.8.1.78 \
            matplotlib==3.8.4 \
            numpy==1.26.4 \
            pandas==2.2.3 \
            seaborn==0.13.2 \
            scikit-learn==1.5.2 \
            scipy==1.14.1

# ------------------------------------------------------------
# 8ï¸âƒ£ å®‰è£…å®éªŒä¸æ—¥å¿—å·¥å…·ï¼ˆNotebook + TensorBoard + è¿›åº¦æ¡ï¼‰
# ------------------------------------------------------------
pip install jupyter notebook tensorboard tqdm

# ------------------------------------------------------------
# 9ï¸âƒ£ å®‰è£… HDF5 æ”¯æŒåº“ï¼ˆç”¨äº .h5 æ•°æ®é›†ï¼Œå¦‚å´æ©è¾¾è¯¾ç¨‹æ‰‹åŠ¿è¯†åˆ«ï¼‰
# ------------------------------------------------------------
pip install h5py==3.11.0

# ------------------------------------------------------------
# ğŸ”Ÿ å®‰è£… Streamlitï¼ˆç”¨äºå¿«é€Ÿåˆ›å»ºäº¤äº’å¼ Web ç•Œé¢ï¼‰
# ------------------------------------------------------------
pip install streamlit==1.39.0

# ------------------------------------------------------------
# 1ï¸âƒ£1ï¸âƒ£ éªŒè¯å®‰è£…ç»“æœ
# ------------------------------------------------------------
python - <<'EOF'
import torch, ultralytics, onnxruntime
print("âœ… PyTorch:", torch.__version__)
print("âœ… YOLO:", ultralytics.__version__)
print("âœ… ONNXRuntime:", onnxruntime.__version__)
EOF
